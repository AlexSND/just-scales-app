import {useMemo} from 'react';
import {ColorPicker} from '../ColorPicker/ColorPicker';
import styles from './Config.module.scss';
import {useDispatch, useSelector} from 'react-redux';
import {RootState} from '../../store';
import {setCompactView} from '../../app.slice';

export const Config = () => {
  const dispatch = useDispatch();
  const compactView = useSelector((state: RootState) => state.app.compactView);

  const onSetCompactView = (state: boolean) => {
    dispatch(setCompactView(state));
  }

  const compactButton = useMemo(() => <div className={styles.compactBtn} onClick={() => onSetCompactView(true)}>
    <svg id="Layer_2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 49.98"><g id="Layer_1-2"><path d="m14.65,33.54c-3.26-.04-6.52-.01-9.78,0-.51,0-1.01.12-1.35.57-.39.52-.6,1.07-.32,1.71.3.69.81,1.11,1.57,1.2,1.52.18,3.04.08,4.56.11.22,0,.52-.1.62.22.09.28-.17.42-.33.59-1.97,1.96-3.93,3.92-5.91,5.88-.99.98-2,1.93-2.96,2.93-.89.93-.92,1.85-.18,2.62.79.82,1.65.8,2.68-.08.16-.14.31-.29.46-.44,2.83-2.8,5.62-5.64,8.37-8.52.2-.21.37-.65.72-.49.29.13.13.54.13.82,0,1.47-.02,2.94.02,4.41.03,1.16.78,1.91,1.75,1.85,1.03-.06,1.81-.95,1.8-2.06,0-1.52,0-3.04,0-4.57,0,0,0,0,.01,0,0-1.6.03-3.21,0-4.81-.03-1.26-.65-1.95-1.86-1.96Z"/><path d="m49.3,46.76c-.96-1-1.98-1.95-2.96-2.93-1.97-1.96-3.94-3.92-5.91-5.88-.17-.17-.42-.31-.33-.59.1-.31.4-.21.62-.22,1.52-.03,3.05.07,4.56-.11.76-.09,1.27-.51,1.57-1.2.28-.65.07-1.19-.32-1.71-.34-.46-.84-.57-1.35-.57-3.26-.02-6.52-.04-9.78,0-1.21.01-1.83.7-1.86,1.96-.04,1.6,0,3.21,0,4.81,0,0,0,0,.01,0,0,1.52,0,3.04,0,4.57,0,1.1.77,2,1.8,2.06.98.05,1.72-.7,1.75-1.85.04-1.47.01-2.94.02-4.41,0-.28-.16-.69.13-.82.36-.17.53.28.72.49,2.75,2.88,5.54,5.72,8.37,8.52.15.15.3.3.46.44,1.03.88,1.89.91,2.68.08.74-.78.71-1.7-.18-2.62Z"/><path d="m3.67,6.15c1.97,1.96,3.94,3.92,5.91,5.88.17.17.42.31.33.59-.1.31-.4.21-.62.22-1.52.03-3.05-.07-4.56.11-.76.09-1.27.51-1.57,1.2-.28.65-.07,1.19.32,1.71.34.46.84.57,1.35.57,3.26.02,6.52.04,9.78,0,1.21-.01,1.83-.7,1.86-1.96.04-1.6,0-3.21,0-4.81,0,0,0,0-.01,0,0-1.52,0-3.04,0-4.57,0-1.1-.77-2-1.8-2.06-.98-.05-1.72.7-1.75,1.85-.04,1.47-.01,2.94-.02,4.41,0,.28.16.69-.13.82-.36.17-.53-.28-.72-.49C9.28,6.76,6.49,3.92,3.66,1.13c-.15-.15-.3-.3-.46-.44C2.17-.2,1.31-.23.52.6c-.74.78-.71,1.7.18,2.62.96,1,1.98,1.95,2.96,2.93Z"/><path d="m35.35,16.44c3.26.04,6.52.01,9.78,0,.51,0,1.01-.12,1.35-.57.39-.52.6-1.07.32-1.71-.3-.69-.81-1.11-1.57-1.2-1.52-.18-3.04-.08-4.56-.11-.22,0-.52.1-.62-.22-.09-.28.17-.42.33-.59,1.97-1.96,3.93-3.92,5.91-5.88.99-.98,2-1.93,2.96-2.93.89-.93.92-1.85.18-2.62-.79-.82-1.65-.8-2.68.08-.16.14-.31.29-.46.44-2.83,2.8-5.62,5.64-8.37,8.52-.2.21-.37.65-.72.49-.29-.13-.13-.54-.13-.82,0-1.47.02-2.94-.02-4.41-.03-1.16-.78-1.91-1.75-1.85-1.03.06-1.81.95-1.8,2.06,0,1.52,0,3.04,0,4.57,0,0,0,0-.01,0,0,1.6-.03,3.21,0,4.81.03,1.26.65,1.95,1.86,1.96Z"/><rect x="16.52" y="16.36" width="17" height="17.16" rx="4.14" ry="4.14"/></g></svg>
  </div>, [])

  const uncompactButton = useMemo(() => <div className={styles.compactBtn} onClick={() => onSetCompactView(false)}>
    <svg id="Layer_2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50.47"><g id="Layer_1-2"><path d="m39.45,0H10.55C4.72,0,0,4.72,0,10.55v29.38c0,5.82,4.72,10.55,10.55,10.55h28.91c5.82,0,10.55-4.72,10.55-10.55V10.55c0-5.82-4.72-10.55-10.55-10.55Zm-17.59,30.2c-.85.89-1.76,1.74-2.64,2.61-1.75,1.74-3.5,3.49-5.25,5.23-.15.15-.37.27-.3.52.08.28.36.19.55.19,1.35.03,2.71-.06,4.06.1.68.08,1.13.45,1.4,1.07.25.57.06,1.06-.29,1.52-.31.41-.75.51-1.2.51-2.9.02-5.8.03-8.7,0-1.07-.01-1.63-.62-1.65-1.75-.03-1.43,0-2.85,0-4.28h.01c0-1.35,0-2.71,0-4.06,0-.98.68-1.78,1.6-1.83.87-.05,1.53.62,1.56,1.65.03,1.31,0,2.61.02,3.92,0,.25-.14.61.12.73.32.15.47-.25.64-.43,2.44-2.56,4.93-5.09,7.45-7.58.14-.13.27-.27.41-.39.91-.79,1.68-.81,2.38-.07.66.69.63,1.51-.16,2.34Zm.27-7.71c-.7.73-1.47.71-2.38-.07-.14-.12-.28-.26-.41-.39-2.52-2.49-5-5.01-7.45-7.58-.18-.19-.33-.58-.64-.43-.26.12-.12.48-.12.73,0,1.31.02,2.61-.02,3.92-.03,1.03-.69,1.7-1.56,1.65-.92-.05-1.61-.85-1.6-1.83,0-1.35,0-2.71,0-4.06,0,0,0,0-.01,0,0-1.43-.02-2.85,0-4.28.03-1.12.58-1.73,1.65-1.75,2.9-.03,5.8-.01,8.7,0,.45,0,.9.11,1.2.51.35.46.54.95.29,1.52-.27.62-.72.99-1.4,1.07-1.35.16-2.71.07-4.06.1-.19,0-.46-.09-.55.19-.08.25.15.38.3.52,1.75,1.74,3.5,3.49,5.25,5.23.88.87,1.78,1.71,2.64,2.61.79.82.82,1.64.16,2.34Zm20.03,17.83c-.03,1.12-.58,1.73-1.65,1.75-2.9.03-5.8.01-8.7,0-.45,0-.9-.11-1.2-.51-.35-.46-.54-.95-.29-1.52.27-.62.72-.99,1.4-1.07,1.35-.16,2.71-.07,4.06-.1.19,0,.46.09.55-.19.08-.25-.15-.38-.3-.52-1.75-1.74-3.5-3.49-5.25-5.23-.88-.87-1.78-1.71-2.64-2.61-.79-.82-.82-1.64-.16-2.34.7-.73,1.47-.71,2.38.07.14.12.28.26.41.39,2.52,2.49,5,5.01,7.45,7.58.18.19.33.58.64.43.26-.12.12-.48.12-.73,0-1.31-.02-2.61.02-3.92.03-1.03.69-1.7,1.56-1.65.92.05,1.61.85,1.6,1.83,0,1.35,0,2.71,0,4.06,0,0,0,0,.01,0,0,1.43.02,2.85,0,4.28Zm0-25.91s0,0-.01,0c0,1.35,0,2.71,0,4.06,0,.98-.68,1.78-1.6,1.83-.87.05-1.53-.62-1.56-1.65-.03-1.31,0-2.61-.02-3.92,0-.25.14-.61-.12-.73-.32-.15-.47.25-.64.43-2.44,2.56-4.93,5.09-7.45,7.58-.14.13-.27.27-.41.39-.91.79-1.68.81-2.38.07-.66-.69-.63-1.51.16-2.34.85-.89,1.76-1.74,2.64-2.61,1.75-1.74,3.5-3.49,5.25-5.23.15-.15.37-.27.3-.52-.08-.28-.36-.19-.55-.19-1.35-.03-2.71.06-4.06-.1-.68-.08-1.13-.45-1.4-1.07-.25-.57-.06-1.06.29-1.52.31-.41.75-.51,1.2-.51,2.9-.02,5.8-.03,8.7,0,1.07.01,1.63.62,1.65,1.75.03,1.43,0,2.85,0,4.28Z"/></g></svg>
  </div>, [])

  return (
    <div className={styles.wrapper}>
      {compactView ? uncompactButton : compactButton}
      <ColorPicker/>
    </div>
  )
}